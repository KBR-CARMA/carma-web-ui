<!DOCTYPE html>
<!--
  Copyright (C) 2017 LEIDOS.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="mobile-web-app-capable" content="yes" />
    <script src="scripts/eventemitter2.min.js"></script>
    <script src="scripts/roslib.js"></script>
    <script src="scripts/control.js" defer></script>
    <script src="scripts/rosbridge.js" defer></script>
    <script src="scripts/googlemap.js"></script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMzV4biqVN0pf3l1lYVWQ4KSWLyoG6OV0&callback=initMap">
    </script>
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
    <link rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css" />
    <!--
    Setup:
    1) Move files command: sudo cp -R -r /home/mfromm/catkin_ws/src/CarmaPlatform/website/* /var/www/html/
    2) Update IP on rosbridge.js
    3) roslaunch carma saxton_cav.launch mock_arada:=true mock_can:=true mock_pinpoint:=true mock_radar:=true

    To Test Fatal:
    rostopic pub /saxton_cav/system_alert cav_msgs/SystemAlert '{type: 3, description: This is the fatal message description.}'
    -->
</head>
<body>
    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'divCapabilities')" id="defaultOpen"><i class="fa fa-tasks" aria-hidden="false"></i>&nbsp;Tasks</button>
        <button class="tablinks" onclick="openTab(event, 'divDriverView')"><i class="fa fa-qrcode" aria-hidden="true"></i>&nbsp;Views</button>
        <button class="tablinks" onclick="openTab(event, 'divMap')"><i class="fa fa-map" aria-hidden="true"></i>&nbsp;Map</button>
        <button class="tablinks" onclick="openTab(event, 'divSystemStatus')"><i class="fa fa-info-circle" aria-hidden="true"></i>&nbsp;Status</button>
        <button class="tablinks" onclick="openTab(event, 'divSystemLogs')"><i class="fa fa-file-text" aria-hidden="true"></i>&nbsp;Logs</button>
    </div>
    <div class="tabindicators">
        <button><img id="imgACCPrimed" src="images/acc2.png" style="width: 40px; height: 40px;" /></button>
        <button><i id="imgPinPoint" class="fa fa-map-pin fa-2x" aria-hidden="true""></i></button>
        <button><i class="fa fa-wifi fa-2x" aria-hidden="true" style="color:gray;"></i></button>
        <button><i class="fa fa-handshake-o fa-2x" aria-hidden="true" style="color:gray;"></i></button>
    </div>
    <div class="tabheader">
        <button id="btnCAVGuidance" onclick="engageGuidance();" title="CAV Guidance" class="button_cav button_disabled" disabled="true">CAV Guidance</button>
    </div>
    <div id="divCapabilities" class="tabcontent">
        <div id="divCapabilitiesMessage" class="message_box">Welcome!</div>
        <div id="divRoutes" align="center"></div>
        <div id="divSubCapabilities" hidden align="center">
        </div>
    </div>
    <div id="divDriverView" class="tabcontent">
        <div id="divRouteInfo">No Route Selected : 00h 00m 00s</div>
        <div class="divSpeedometer">
            <div class="gauge-a"></div>
            <div class="gauge-b"></div>
            <div class="gauge-c"></div>
            <div class="gauge-data"><h1 id="percent">0</h1><br>MPH</div>
        </div>
        <div id="divSpeedCmd" class="sign-black-border-outer">
            <div class="sign-black-border-inner">
                <div class="sign-black-border-title">SPEED CMD</div>
                <div id="divSpeedCmdValue" class="sign-black-border-value">0</div>
            </div>
        </div>
        <div id="divSpeedLimit" class="sign-black-border-outer">
            <div class="sign-black-border-inner">
                <div class="sign-black-border-title">SPEED LIMIT</div>
                <div id="divSpeedLimitValue" class="sign-black-border-value">0</div>
            </div>
        </div>
        <div id="divDistRemaining">Distance Remaining to Next Speed Limit: 0 miles</div>
    </div>
    <div id="divMap" class="tabcontent">
        <div id="map"></div>
    </div>
    <div id="divSystemStatus" class="tabcontent">
        <table id="tblSystemStatus" class="table-style1">
            <tr>
                <td class="col-style1">
                    <table id="tblFirstA" class="table-style1">
                        <tr>
                            <td class="section1" colspan="2">
                                <strong>Important Vehicle Info</strong>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-title">Title</td>
                            <td class="col-title">Value</td>
                        </tr>
                    </table>
                    <table id="tblFirstB" class="table-style1">
                        <tr>
                            <td class="section1" colspan="2">
                                <strong>Guidance Related Info</strong>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-title">Title</td>
                            <td class="col-title">Value</td>
                        </tr>
                    </table>
                </td>
                <td class="col-style1">
                    <table id="tblSecondA" class="table-style1">
                        <tr>
                            <td class="section1" colspan="2">
                                <strong>Route Info</strong>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-title">Title</td>
                            <td class="col-title">Value</td>
                        </tr>
                    </table>
                    <table id="tblSecondB" class="table-style1">
                        <tr>
                            <td class="section1" colspan="2">
                                <strong>Host Vehicle Info</strong>
                            </td>
                        </tr>
                        <tr>
                            <td class="col-title">Title</td>
                            <td class="col-title">Value</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
    <div id="divSystemLogs" class="tabcontent">
        <h3>System Logs</h3>
        <div id="statusIndicator">
            <p id="connecting">
                Connecting to ROSbridge...
            </p>
            <p id="connected" style="color:#00D600; display:none">
                Connected to ROSBridge.
            </p>
            <p id="error" style="color:#FF0000; display:none">
                ROSBridge unable to connect.
            </p>
            <p id="closed" style="display:none">
                ROSBridge connection closed.
            </p>
        </div>
        <p />
        <div id="divLog" class="logStatus">
        </div>
    </div>
    <!-- The Modal -->
    <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>SYSTEM ALERT<i class="fa fa-exclamation-triangle" style="font-size:40px;color:red;"></i></h2>
            </div>
            <div class="modal-body">
                <p>Some text in the Modal Body.</p>
            </div>
            <div class="modal-footer">
                <button id="btnModal" title="CAV Guidance">OK</button>
            </div>
        </div>
    </div>
    <audio id="audioAlert1" preload="auto">
        <source src="sound/not-kiddin.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="audioAlert2" preload="auto">
        <source src="sound/sunny.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="audioAlert3" preload="auto">
        <source src="sound/hurry.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
</body>
<footer>
    <p class="copyright">© LEIDOS 2017</p>
    <p class="systemversion">&nbsp;</p>
</footer>
</html>
